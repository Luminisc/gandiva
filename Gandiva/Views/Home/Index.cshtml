@model Gandiva.Models.HomeModel
@{
    ViewBag.Title = "Home";
}

<div class="navbar">
    <div class="top-bar-element top-bar-element-left">
        @Html.ActionLink("Создать новую задачу", "Index", "Home")
        <span>|</span>
        @Html.ActionLink("Пользователи", "About", "Home")
    </div>
    <div class="top-bar-element top-bar-element-right">
        @Html.DropDownListFor(m => m.ActiveUser, new SelectList(Model.Users, "Id", "FullName"))
    </div>
</div>
<div>
    <input id="page" value="0" hidden />
    <div id="tasksList" />
</div> 

<script type="text/javascript">

    $(document).ready(function () {
        window.app.changePage = function (page) {
            $("#page").val(page);

            $("#tasksList").load('@(Url.Action("TasksList", "Home",null, Request.Url.Scheme))?startPage=' + page);
        };

        window.app.nextPage = function () {
            var page = $("#page").val();
            var pageMax = $("#pageMax").val();
            if (page + 1 <= pageMax) {
                page++;
            }
            window.app.changePage(page);
        };

        window.app.prevPage = function () {
            var page = $("#page").val();
            var pageMax = $("#pageMax").val();
            if (page - 1 >= 0) {
                page--;
            }
            window.app.changePage(page);
        };

        $("#tasksList").load('@(Url.Action("TasksList", "Home",null, Request.Url.Scheme))?startPage=0');
    });
</script>